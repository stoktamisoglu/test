<!DOCTYPE html>

<html>

<head>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Color Tap Debugger</title>

  <style>

    body {

      margin: 0;

      display: flex;

      flex-wrap: wrap;

    }

    .color-box {

      width: 25vw;

      height: 25vw;

      flex-shrink: 0;

    }

    #output {

      position: fixed;

      bottom: 0;

      left: 0;

      right: 0;

      background: black;

      color: white;

      font-size: 16px;

      padding: 8px;

      text-align: left;

      white-space: pre-line;

      z-index: 1000;

    }

    .marker {

      position: absolute;

      width: 10px;

      height: 10px;

      background: red;

      border-radius: 50%;

      pointer-events: none;

      z-index: 999;

      transform: translate(-50%, -50%);

    }

  </style>

</head>

<body>

  <div id="output">Tap anywhere to test color and coordinate mapping</div>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script>

    // Generate 64 random color boxes

    for (let i = 0; i < 64; i++) {

      const r = Math.floor(Math.random() * 256);

      const g = Math.floor(Math.random() * 256);

      const b = Math.floor(Math.random() * 256);

      const div = document.createElement('div');

      div.className = 'color-box';

      div.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;

      document.body.appendChild(div);

    }



    // Handle tap or click

    document.addEventListener('click', function (e) {

      const pageX = e.pageX;

      const pageY = e.pageY;

      const clientX = e.clientX;

      const clientY = e.clientY;

      const screenX = e.screenX;

      const screenY = e.screenY;

      const scrollY = window.scrollY;



      // Place a red marker

      let oldMarker = document.querySelector('.marker');

      if (oldMarker) oldMarker.remove();



      const marker = document.createElement('div');

      marker.className = 'marker';

      marker.style.left = `${pageX}px`;

      marker.style.top = `${pageY}px`;

      document.body.appendChild(marker);



      // Render canvas and get RGB at pageX/pageY

      html2canvas(document.body).then(canvas => {

        const ctx = canvas.getContext('2d');

        const pixel = ctx.getImageData(pageX, pageY, 1, 1).data;

        const rgb = `rgb(${pixel[0]}, ${pixel[1]}, ${pixel[2]})`;



        // Update output info

        const output = document.getElementById('output');

        output.innerText = `Click Info:

screenX: ${screenX}, screenY: ${screenY}

clientX: ${clientX}, clientY: ${clientY}

pageX: ${pageX}, pageY: ${pageY}

scrollY: ${scrollY}

Detected RGB: ${rgb}`;

      });

    });

  </script>

</body>

</html>
